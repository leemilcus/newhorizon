<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Horizon Landscaping Solutions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>:root {
    --primary-green: #1B5E20;
    --dark-green: #0d3b1e;
    --medium-green: #2E7D32;
    --light-green: #E8F5E9;
    --accent-orange: #FF9800;
    --dark-orange: #EF6C00;
    --light-blue: #4FC3F7;
    --dark-blue: #0288D1;
    --bg-light: #f8f9fa;
    --bg-medium: #f0f3f5;
    --card-light: #ffffff;
    --text-dark: #1a1a1a;
    --text-medium: #4a4a4a;
    --border-color: #d1d1d1;
    --shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    --shadow-hover: 0 10px 25px rgba(0, 0, 0, 0.1);
    --transition: all 0.3s ease;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: 'Inter', sans-serif;
    line-height: 1.6;
    color: var(--text-dark);
    background-color: var(--bg-light);
    overflow-x: hidden;
    position: relative;
}

h1, h2, h3, h4, h5 {
    font-family: 'Montserrat', sans-serif;
    font-weight: 600;
    margin-bottom: 1rem;
    line-height: 1.3;
}

.container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.section-padding {
    padding: 100px 0;
}

.text-center {
    text-align: center;
}

/* Floating Admin Button */
.floating-admin-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 999;
    background-color: var(--primary-green);
    color: white;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 5px 15px rgba(27, 94, 32, 0.3);
    cursor: pointer;
    transition: var(--transition);
    text-decoration: none;
    border: none;
    font-size: 24px;
}

.floating-admin-btn:hover {
    background-color: var(--dark-green);
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 10px 25px rgba(27, 94, 32, 0.4);
}

.floating-admin-btn.admin-active {
    background-color: var(--accent-orange);
}

.floating-admin-btn.admin-active:hover {
    background-color: var(--dark-orange);
}

/* Mode Toggle - Keep it at top but smaller */
.mode-toggle {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1001;
    display: flex;
    gap: 8px;
    background: white;
    padding: 8px;
    border-radius: 8px;
    box-shadow: var(--shadow);
    border: 1px solid var(--border-color);
    display: none; /* Hide by default, will show when needed */
}

.mode-toggle-btn {
    padding: 6px 12px;
    background: var(--bg-light);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
    transition: var(--transition);
    font-size: 14px;
}

.mode-toggle-btn.active {
    background: var(--primary-green);
    color: white;
    border-color: var(--primary-green);
}

.mode-toggle-btn:hover:not(.active) {
    background: var(--light-green);
}

/* Admin/Main visibility */
.admin-mode #main-website {
    display: none;
}

.main-mode #admin-portal {
    display: none;
}

/* Show mode toggle when in admin mode */
.admin-mode .mode-toggle {
    display: flex;
}

/* Main website container */
#main-website {
    position: relative;
    width: 100%;
    overflow-x: hidden;
}

/* Admin portal container */
#admin-portal {
    min-height: 100vh;
    background: var(--bg-light);
    padding-top: 80px; /* Space for mode toggle */
}

/* Common button styles */
.btn {
    display: inline-block;
    background-color: var(--accent-orange);
    color: white;
    padding: 14px 32px;
    border-radius: 4px;
    text-decoration: none;
    font-weight: 600;
    font-size: 16px;
    border: none;
    cursor: pointer;
    transition: var(--transition);
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
}

.btn:hover {
    background-color: var(--dark-orange);
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(239, 108, 0, 0.2);
}

.btn-outline {
    background-color: transparent;
    color: var(--accent-orange);
    border: 2px solid var(--accent-orange);
}

.btn-outline:hover {
    background-color: var(--accent-orange);
    color: white;
}

.btn-green {
    background-color: var(--primary-green);
}

.btn-green:hover {
    background-color: var(--dark-green);
}

.btn-red {
    background-color: #e53935;
}

.btn-red:hover {
    background-color: #c62828;
}

.btn-full {
    width: 100%;
    padding: 15px;
}

/* ================= MAIN WEBSITE STYLES ================= */

/* Header */
header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    background-color: rgba(255, 255, 255, 0.97);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--border-color);
    transition: var(--transition);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    max-width: 1200px;
    margin: 0 auto;
}

.logo-img {
    height: 90px;
    width: auto;
    max-width: 300px;
    object-fit: contain;
}

.main-nav ul {
    display: flex;
    list-style: none;
    align-items: center;
}

.main-nav li {
    margin-left: 20px;
    display: flex;
    align-items: center;
}

.main-nav a {
    text-decoration: none;
    color: var(--text-dark);
    font-weight: 500;
    font-size: 15px;
    transition: var(--transition);
    position: relative;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.main-nav a:hover {
    color: var(--accent-orange);
}

.mobile-menu-btn {
    display: none;
    font-size: 24px;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text-dark);
    transition: var(--transition);
}

/* ========== FIXED HERO SLIDER ========== */
.hero-slider {
    position: relative;
    width: 100%;
    height: 100vh;
    min-height: 600px; /* Minimum height to prevent too short */
    max-height: 100vh;
    overflow: hidden;
    margin: 0;
    padding: 0;
}

.hero-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0;
    transition: opacity 1s ease-in-out;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    box-sizing: border-box;
}

.hero-slide.active {
    opacity: 1;
}

.hero-content {
    background-color: rgba(255, 255, 255, 0.9);
    padding: 40px 30px;
    border-radius: 8px;
    max-width: 800px;
    width: 90%;
    text-align: center;
    box-shadow: var(--shadow);
    position: relative;
    z-index: 2;
    margin: 0 auto;
    backdrop-filter: blur(5px);
}

.hero-content h1 {
    font-size: 2.5rem;
    margin-bottom: 20px;
    font-weight: 700;
    color: var(--text-dark);
    line-height: 1.2;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.hero-content .highlight {
    color: var(--accent-orange);
    font-weight: 600;
}

.hero-content p {
    font-size: 1.1rem;
    margin-bottom: 30px;
    line-height: 1.6;
    color: var(--text-medium);
    word-wrap: break-word;
}

/* Hero buttons container */
.hero-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap;
}

.hero-content .btn {
    min-width: 180px;
}

.hero-content .btn-outline {
    margin-left: 0;
}

/* Slider controls */
.slider-controls {
    position: absolute;
    bottom: 30px;
    left: 0;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10;
    padding: 0 20px;
}

.slider-dots {
    display: flex;
    gap: 10px;
}

.slider-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.5);
    cursor: pointer;
    transition: var(--transition);
}

.slider-dot.active {
    background-color: var(--accent-orange);
    transform: scale(1.2);
}

/* Services Section */
.services {
    background-color: var(--bg-medium);
    position: relative;
    width: 100%;
    overflow: hidden;
}

.section-title {
    font-size: 2.5rem;
    margin-bottom: 20px;
    color: var(--text-dark);
    position: relative;
    display: inline-block;
}

.section-title:after {
    content: '';
    position: absolute;
    width: 70px;
    height: 4px;
    background-color: var(--accent-orange);
    bottom: -15px;
    left: 0;
}

.text-center .section-title:after {
    left: 50%;
    transform: translateX(-50%);
}

.section-subtitle {
    color: var(--text-medium);
    font-size: 1.1rem;
    max-width: 700px;
    margin: 0 auto 60px;
    font-weight: 300;
}

.services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 30px;
    position: relative;
    z-index: 2;
}

.service-card {
    background-color: var(--card-light);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: var(--shadow);
    transition: var(--transition);
    border: 1px solid var(--border-color);
    position: relative;
    z-index: 1;
    height: 100%;
}

.service-card:hover {
    transform: translateY(-10px);
    box-shadow: var(--shadow-hover);
    border-color: var(--primary-green);
}

.service-icon {
    background-color: var(--primary-green);
    color: white;
    font-size: 40px;
    padding: 30px;
    text-align: center;
}

.service-content {
    padding: 30px;
}

.service-content h3 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: var(--text-dark);
}

.service-content p {
    margin-bottom: 20px;
    color: var(--text-medium);
}

.service-content ul {
    list-style: none;
    margin-top: 20px;
}

.service-content li {
    padding: 8px 0;
    border-bottom: 1px solid var(--border-color);
    color: var(--text-medium);
}

.service-content li:last-child {
    border-bottom: none;
}

.service-content li:before {
    content: '✓';
    color: var(--primary-green);
    font-weight: bold;
    margin-right: 10px;
}

/* Gallery Section */
.gallery {
    background-color: var(--bg-light);
}

.gallery-filter {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 40px;
    flex-wrap: wrap;
}

.filter-btn {
    padding: 10px 25px;
    background-color: var(--bg-medium);
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: var(--transition);
    font-weight: 500;
    color: var(--text-medium);
}

.filter-btn:hover {
    background-color: var(--light-green);
    color: var(--primary-green);
}

.filter-btn.active {
    background-color: var(--primary-green);
    color: white;
}

.website-gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 25px;
}

.website-gallery-item {
    position: relative;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: var(--shadow);
    cursor: pointer;
    transition: var(--transition);
    height: 250px;
}

.website-gallery-item:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-hover);
}

.website-gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: var(--transition);
}

.website-gallery-item:hover img {
    transform: scale(1.05);
}

.gallery-caption {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
    color: white;
    padding: 20px;
    transform: translateY(100%);
    transition: var(--transition);
}

.website-gallery-item:hover .gallery-caption {
    transform: translateY(0);
}

.gallery-caption h4 {
    margin-bottom: 5px;
    font-size: 1.1rem;
}

.gallery-caption p {
    font-size: 0.9rem;
    opacity: 0.8;
    margin-bottom: 0;
}

/* About Section */
.about {
    background-color: var(--bg-medium);
}

.about-content {
    display: flex;
    align-items: center;
    gap: 60px;
}

.about-text {
    flex: 1;
}

.about-image {
    flex: 1;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: var(--shadow);
}

.about-image img {
    width: 100%;
    height: auto;
    display: block;
    transition: var(--transition);
}

.about-image:hover img {
    transform: scale(1.03);
}

.about-text p {
    margin-bottom: 20px;
    color: var(--text-medium);
}

/* Contact Section */
.contact-section {
    background-color: var(--bg-light);
}

.contact-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
}

.contact-info, .contact-form-container {
    background-color: var(--card-light);
    border-radius: 8px;
    padding: 40px;
    box-shadow: var(--shadow);
}

.contact-info h3, .contact-form-container h3 {
    margin-bottom: 30px;
    color: var(--primary-green);
}

.contact-details {
    margin-bottom: 40px;
}

.contact-detail-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 25px;
}

.contact-detail-icon {
    background-color: var(--light-green);
    color: var(--primary-green);
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    flex-shrink: 0;
}

.contact-detail-text h4 {
    margin-bottom: 5px;
    font-size: 1.1rem;
}

.business-hours h4 {
    margin-bottom: 15px;
    color: var(--primary-green);
}

.business-hours p {
    margin-bottom: 10px;
    color: var(--text-medium);
}

/* Contact Form */
.form-group {
    margin-bottom: 20px;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.form-control {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    font-family: 'Inter', sans-serif;
    font-size: 16px;
    transition: var(--transition);
    background-color: white;
}

.form-control:focus {
    outline: none;
    border-color: var(--primary-green);
    box-shadow: 0 0 0 2px rgba(27, 94, 32, 0.1);
}

textarea.form-control {
    min-height: 150px;
    resize: vertical;
}

select.form-control {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%231B5E20' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 16px;
    padding-right: 40px;
}

.form-loading, .form-success, .form-error {
    display: none;
    text-align: center;
    padding: 20px;
    background-color: var(--light-green);
    border-radius: 4px;
    margin-bottom: 20px;
    color: var(--primary-green);
}

.form-success.active, .form-error.active, .form-loading.active {
    display: block;
}

.form-error {
    background-color: #FFEBEE;
    color: #C62828;
}

.form-loading {
    background-color: #E3F2FD;
    color: var(--dark-blue);
}

/* Footer */
footer {
    background-color: var(--dark-green);
    color: white;
    padding: 70px 0 30px;
}

.footer-main {
    display: flex;
    justify-content: space-between;
    gap: 60px;
    margin-bottom: 50px;
}

.footer-logo-section {
    flex: 1;
    min-width: 300px;
}

.footer-logo-section .logo-img {
    height: 100px;
    margin-bottom: 20px;
    filter: brightness(0) invert(1);
}

.footer-tagline {
    margin-bottom: 25px;
    line-height: 1.6;
    opacity: 0.9;
}

.footer-contact p {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    opacity: 0.9;
}

.footer-contact i {
    margin-right: 10px;
    color: var(--accent-orange);
}

.footer-links {
    display: flex;
    gap: 60px;
}

.footer-links-column h4 {
    color: white;
    margin-bottom: 25px;
    font-size: 1.2rem;
    position: relative;
    padding-bottom: 10px;
}

.footer-links-column h4:after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 40px;
    height: 3px;
    background-color: var(--accent-orange);
}

.footer-links-column ul {
    list-style: none;
}

.footer-links-column li {
    margin-bottom: 12px;
}

.footer-links-column a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    transition: var(--transition);
}

.footer-links-column a:hover {
    color: var(--accent-orange);
    padding-left: 5px;
}

.footer-divider {
    height: 1px;
    background-color: rgba(255, 255, 255, 0.1);
    margin: 30px 0;
}

.footer-copyright {
    text-align: center;
    padding-top: 30px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    font-size: 0.9rem;
    opacity: 0.7;
}

.company-name {
    color: var(--accent-orange);
    font-weight: 600;
}

.crafted-by {
    margin-top: 10px;
}

.brand-name {
    color: var(--light-blue);
    text-decoration: none;
    transition: var(--transition);
}

.brand-name:hover {
    color: var(--accent-orange);
}

/* Lightbox */
.lightbox-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    z-index: 2000;
    display: none;
    align-items: center;
    justify-content: center;
}

.lightbox-modal.active {
    display: flex;
}

.lightbox-close {
    position: absolute;
    top: 20px;
    right: 30px;
    color: white;
    font-size: 40px;
    cursor: pointer;
    z-index: 2001;
    transition: var(--transition);
}

.lightbox-close:hover {
    color: var(--accent-orange);
}

.lightbox-content {
    max-width: 90%;
    max-height: 90%;
    position: relative;
}

.lightbox-content img {
    max-width: 100%;
    max-height: 80vh;
    display: block;
    margin: 0 auto;
    border-radius: 4px;
}

.lightbox-nav {
    position: absolute;
    width: 100%;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    justify-content: space-between;
    padding: 0 20px;
    pointer-events: none;
}

.lightbox-nav-btn {
    pointer-events: auto;
    width: 50px;
    height: 50px;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 24px;
    cursor: pointer;
    transition: var(--transition);
    backdrop-filter: blur(5px);
}

.lightbox-nav-btn:hover {
    background-color: rgba(255, 255, 255, 0.2);
    color: var(--accent-orange);
}

/* ================= ADMIN STYLES ================= */
.admin-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.admin-header {
    text-align: center;
    margin-bottom: 50px;
    padding: 40px;
    background-color: white;
    border-radius: 8px;
    box-shadow: var(--shadow);
}

.admin-header h1 {
    color: var(--primary-green);
    margin-bottom: 15px;
}

.admin-header p {
    color: var(--text-medium);
    max-width: 600px;
    margin: 0 auto 30px;
}

.back-to-site {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: var(--primary-green);
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition);
}

.back-to-site:hover {
    color: var(--dark-green);
    gap: 12px;
}

.login-container {
    max-width: 500px;
    margin: 0 auto;
}

.login-form {
    padding: 40px;
}

.password-hint {
    font-size: 0.9rem;
    color: var(--text-medium);
    margin-top: 5px;
    font-style: italic;
}

.admin-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
}

@media (max-width: 992px) {
    .admin-content {
        grid-template-columns: 1fr;
    }
}

.admin-card {
    background-color: white;
    border-radius: 8px;
    padding: 30px;
    box-shadow: var(--shadow);
    margin-bottom: 30px;
}

.admin-card h2 {
    color: var(--primary-green);
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--light-green);
}

.message {
    padding: 15px;
    border-radius: 4px;
    margin-bottom: 20px;
    font-weight: 500;
}

.message.success {
    background-color: #E8F5E9;
    color: var(--primary-green);
    border-left: 4px solid var(--primary-green);
}

.message.error {
    background-color: #FFEBEE;
    color: #C62828;
    border-left: 4px solid #C62828;
}

.message.info {
    background-color: #E3F2FD;
    color: var(--dark-blue);
    border-left: 4px solid var(--dark-blue);
}

/* File Upload */
.file-upload-container {
    border: 2px dashed var(--border-color);
    border-radius: 8px;
    padding: 50px 30px;
    text-align: center;
    margin-bottom: 30px;
    transition: var(--transition);
    cursor: pointer;
}

.file-upload-container.drag-over {
    border-color: var(--primary-green);
    background-color: var(--light-green);
}

.file-upload-icon {
    font-size: 48px;
    color: var(--border-color);
    margin-bottom: 20px;
    transition: var(--transition);
}

.file-upload-container:hover .file-upload-icon {
    color: var(--primary-green);
}

.file-upload-text h4 {
    margin-bottom: 10px;
    color: var(--text-dark);
}

.file-upload-text p {
    color: var(--text-medium);
    margin-bottom: 20px;
}

.file-upload-btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background-color: var(--primary-green);
    color: white;
    padding: 12px 24px;
    border-radius: 4px;
    cursor: pointer;
    transition: var(--transition);
    font-weight: 500;
}

.file-upload-btn:hover {
    background-color: var(--dark-green);
    transform: translateY(-2px);
}

.file-input {
    display: none;
}

.selected-file {
    display: none;
    align-items: center;
    gap: 15px;
    background-color: var(--light-green);
    padding: 15px;
    border-radius: 4px;
    margin-bottom: 20px;
}

.selected-file.active {
    display: flex;
}

.file-icon {
    background-color: white;
    width: 50px;
    height: 50px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-green);
    font-size: 24px;
}

.file-info h5 {
    margin-bottom: 5px;
    color: var(--text-dark);
}

.file-info p {
    color: var(--text-medium);
    font-size: 0.9rem;
}

.image-preview {
    display: none;
    margin-bottom: 20px;
    border-radius: 4px;
    overflow: hidden;
    max-height: 300px;
}

.image-preview.active {
    display: block;
}

.image-preview img {
    width: 100%;
    height: auto;
    display: block;
    max-height: 300px;
    object-fit: contain;
}

.storage-info {
    margin-top: 20px;
    padding: 15px;
    background-color: var(--light-green);
    border-radius: 4px;
    color: var(--primary-green);
    font-size: 0.9rem;
}

/* Gallery Management */
.gallery-management {
    max-height: 800px;
    overflow-y: auto;
}

.gallery-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
}

.gallery-item {
    background-color: var(--bg-light);
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid var(--border-color);
    transition: var(--transition);
}

.gallery-item:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-hover);
}

.gallery-item img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    display: block;
}

.gallery-item-info {
    padding: 15px;
}

.gallery-item-info h4 {
    margin-bottom: 10px;
    font-size: 1rem;
    color: var(--text-dark);
}

.gallery-item-info p {
    font-size: 0.9rem;
    color: var(--text-medium);
    margin-bottom: 10px;
    line-height: 1.4;
}

.category-badge {
    display: inline-block;
    background-color: var(--light-green);
    color: var(--primary-green);
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
    margin-bottom: 15px;
}

.gallery-item-actions {
    display: flex;
    gap: 10px;
}

.gallery-item-actions .btn {
    padding: 8px 15px;
    font-size: 14px;
    flex: 1;
    text-align: center;
}

.spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s ease-in-out infinite;
    margin-right: 10px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ================= RESPONSIVE DESIGN ================= */

@media (max-width: 992px) {
    .hero-content h1 {
        font-size: 2.2rem;
    }
    
    .about-content {
        flex-direction: column;
    }
    
    .about-image {
        max-width: 100%;
        margin-top: 40px;
    }
    
    .contact-container {
        grid-template-columns: 1fr;
        gap: 40px;
    }
    
    .form-row {
        grid-template-columns: 1fr;
        gap: 0;
    }
    
    .container {
        padding: 0 15px;
    }
    
    .hero-content {
        padding: 30px 20px;
        width: 95%;
    }
    
    .service-content, .admin-card, .contact-info, .contact-form-container {
        padding: 25px;
    }
    
    .admin-header {
        padding: 30px 20px;
    }
    
    .admin-header h1 {
        font-size: 2rem;
    }
}

@media (max-width: 768px) {
    .main-nav {
        position: fixed;
        top: 80px;
        left: -100%;
        width: 100%;
        background-color: white;
        transition: var(--transition);
        border-top: 1px solid var(--border-color);
        padding: 30px;
        height: calc(100vh - 80px);
        overflow-y: auto;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .main-nav.active {
        left: 0;
    }
    
    .main-nav ul {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .main-nav li {
        margin: 0 0 20px 0;
        width: 100%;
    }
    
    .main-nav a {
        font-size: 16px;
        padding: 10px 0;
        display: block;
        width: 100%;
    }
    
    .mobile-menu-btn {
        display: block;
    }
    
    /* Fixed Hero for Mobile */
    .hero-slider {
        height: 100vh;
        min-height: 100vh;
        padding-top: 80px;
    }
    
    .hero-slide {
        padding: 15px;
        align-items: center;
        justify-content: center;
    }
    
    .hero-content {
        padding: 25px 20px;
        width: 95%;
        max-width: 95%;
        margin: 0 auto;
        background-color: rgba(255, 255, 255, 0.95);
    }
    
    .hero-content h1 {
        font-size: 1.8rem;
        line-height: 1.3;
        margin-bottom: 15px;
        padding: 0 5px;
    }
    
    .hero-content p {
        font-size: 1rem;
        margin-bottom: 25px;
        line-height: 1.5;
        padding: 0 5px;
    }
    
    /* Mobile buttons - stacked vertically */
    .hero-buttons {
        flex-direction: column;
        gap: 10px;
        width: 100%;
    }
    
    .hero-content .btn {
        width: 100%;
        max-width: 280px;
        margin: 0 auto;
        padding: 12px 20px;
    }
    
    .hero-content .btn-outline {
        margin-left: 0;
    }
    
    .slider-controls {
        bottom: 20px;
    }
    
    .section-title {
        font-size: 2rem;
        text-align: center;
        width: 100%;
    }
    
    .section-subtitle {
        font-size: 1rem;
        padding: 0 10px;
    }
    
    .services-grid {
        grid-template-columns: 1fr;
        gap: 25px;
    }
    
    .website-gallery-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .about-content {
        gap: 30px;
    }
    
    .about-text, .about-image {
        width: 100%;
    }
    
    .gallery-filter {
        justify-content: center;
        gap: 8px;
    }
    
    .filter-btn {
        padding: 6px 15px;
        font-size: 14px;
    }
    
    /* Floating button adjustments */
    .floating-admin-btn {
        bottom: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        font-size: 20px;
    }
    
    /* Center admin content on mobile */
    .admin-container {
        padding: 10px;
    }
    
    .admin-card {
        padding: 20px;
    }
    
    .file-upload-container {
        padding: 30px 15px;
    }
    
    .gallery-list {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    /* Footer adjustments for mobile */
    .footer-main {
        flex-direction: column;
        gap: 30px;
        text-align: center;
    }
    
    .footer-links {
        width: 100%;
        justify-content: center;
        gap: 30px;
    }
    
    .footer-logo-section {
        min-width: 100%;
    }
    
    .footer-contact p {
        justify-content: center;
    }
}

@media (max-width: 576px) {
    .hero-slider {
        min-height: 100vh;
        height: 100vh;
    }
    
    .hero-content {
        padding: 20px 15px;
        width: 95%;
    }
    
    .hero-content h1 {
        font-size: 1.6rem;
        line-height: 1.3;
    }
    
    .hero-content p {
        font-size: 0.95rem;
        margin-bottom: 20px;
    }
    
    .hero-content .btn {
        font-size: 14px;
        padding: 12px 20px;
    }
    
    .slider-controls {
        bottom: 15px;
    }
    
    .btn {
        padding: 12px 24px;
        font-size: 14px;
    }
    
    .section-padding {
        padding: 70px 0;
    }
    
    .logo-img {
        height: 70px;
        max-width: 200px;
    }
    
    .website-gallery-item {
        height: 200px;
    }
    
    .contact-info, .contact-form-container {
        padding: 20px;
    }
    
    .contact-detail-item {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
    
    .contact-detail-icon {
        margin-right: 0;
        margin-bottom: 10px;
    }
    
    .form-row {
        grid-template-columns: 1fr;
        gap: 0;
    }
    
    /* Even smaller floating button for very small screens */
    .floating-admin-btn {
        bottom: 15px;
        right: 15px;
        width: 45px;
        height: 45px;
        font-size: 18px;
    }
    
    .mode-toggle {
        top: 15px;
        right: 15px;
    }
    
    .footer-links {
        flex-direction: column;
        gap: 20px;
        text-align: center;
    }
    
    .footer-links-column {
        min-width: 100%;
    }
    
    .footer-copyright {
        font-size: 0.8rem;
        padding: 0 10px;
    }
}

@media (max-width: 480px) {
    .hero-content h1 {
        font-size: 1.5rem;
    }
    
    .hero-content p {
        font-size: 0.9rem;
    }
    
    .hero-content .btn {
        padding: 12px 15px;
        font-size: 14px;
    }
}

@media (max-width: 375px) {
    .hero-content h1 {
        font-size: 1.4rem;
    }
    
    .hero-content {
        padding: 18px 12px;
    }
    
    .section-title {
        font-size: 1.8rem;
    }
    
    .container {
        padding: 0 10px;
    }
    
    .floating-admin-btn {
        bottom: 10px;
        right: 10px;
    }
}

/* Fix for landscape mode on mobile */
@media (max-height: 600px) and (orientation: landscape) {
    .hero-slider {
        min-height: 100vh;
        height: 100vh;
    }
    
    .hero-slide {
        padding-top: 60px;
        align-items: flex-start;
    }
    
    .hero-content {
        padding: 15px;
        width: 90%;
        max-width: 90%;
        margin-top: 10px;
    }
    
    .hero-content h1 {
        font-size: 1.5rem;
        margin-bottom: 10px;
    }
    
    .hero-content p {
        font-size: 0.85rem;
        margin-bottom: 15px;
        line-height: 1.4;
    }
    
    .hero-buttons {
        flex-direction: row;
        flex-wrap: wrap;
    }
    
    .hero-content .btn {
        padding: 8px 15px;
        font-size: 12px;
        min-width: 140px;
    }
    
    .slider-controls {
        bottom: 10px;
    }
}

/* Fix for very short screens */
@media (max-height: 500px) {
    .hero-slide {
        align-items: flex-start;
        padding-top: 80px;
    }
    
    .hero-content {
        padding: 15px;
        max-height: 80vh;
        overflow-y: auto;
    }
    
    .hero-content h1 {
        font-size: 1.4rem;
        margin-bottom: 10px;
    }
    
    .hero-content p {
        font-size: 0.8rem;
        margin-bottom: 15px;
    }
}
</style>
</head>
<body class="main-mode">
    <!-- Floating Admin Button -->
    <button class="floating-admin-btn" id="floatingAdminBtn" title="Admin Portal">
        <i class="fas fa-cog"></i>
    </button>
   
    <!-- Mode Toggle (shown only in admin mode) -->
    <div class="mode-toggle">
        <button class="mode-toggle-btn active" data-mode="main">Website</button>
        <button class="mode-toggle-btn" data-mode="admin">Admin</button>
    </div>
    <!-- Main Website -->
    <div id="main-website">
        <!-- Header -->
        <header>
            <div class="header-container">
                <div class="logo">
                    <img src="./img/NHLS Logo.png" alt="New Horizon Landscaping Solutions" class="logo-img">
                </div>
               
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
               
                <nav class="main-nav" id="mainNav">
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#gallery">Gallery</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </header>
        <!-- Hero Slider -->
        <section class="hero-slider" id="home">
            <!-- Slide 1 -->
            <div class="hero-slide active" style="background-image: url('./img/landscaping.jpg');">
                <div class="hero-content">
                    <h1>Premium <span class="highlight">Landscaping</span> Solutions</h1>
                    <p>New Horizon Landscaping transforms outdoor spaces with sustainable, innovative designs. From residential gardens to commercial landscapes and sports fields, we deliver excellence in every project.</p>
                    <a href="#contact" class="btn">Start Your Project</a>
                    <a href="#services" class="btn btn-outline">Our Services</a>
                </div>
            </div>
           
            <!-- Slide 2 -->
            <div class="hero-slide" style="background-image: url('./img/water-saving-irrigation.jpg');">
                <div class="hero-content">
                    <h1>Transforming <span class="highlight">Outdoor</span> Spaces</h1>
                    <p>Expert hardscaping and softscaping solutions that blend functionality with natural beauty for lasting impact.</p>
                    <a href="#gallery" class="btn">View Our Work</a>
                    <a href="#contact" class="btn btn-outline">Get a Quote</a>
                </div>
            </div>
           
            <!-- Slide 3 -->
            <div class="hero-slide" style="background-image: url('./img/Sustainable Landscape Design.jpg');">
                <div class="hero-content">
                    <h1>Sustainable <span class="highlight">Landscape</span> Design</h1>
                    <p>Creating environmentally responsible outdoor spaces with water-efficient irrigation and native plant selections.</p>
                    <a href="#services" class="btn">Our Services</a>
                    <a href="#about" class="btn btn-outline">About Us</a>
                </div>
            </div>
           
            <div class="slider-controls">
                <div class="slider-dots">
                    <div class="slider-dot active" data-slide="0"></div>
                    <div class="slider-dot" data-slide="1"></div>
                    <div class="slider-dot" data-slide="2"></div>
                </div>
            </div>
        </section>
        <!-- Services Section -->
        <section class="services section-padding" id="services">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-title">Comprehensive Services</h2>
                    <p class="section-subtitle">We provide end-to-end landscaping solutions, from initial design to ongoing maintenance, ensuring your outdoor space remains exceptional year-round.</p>
                </div>
               
                <div class="services-grid">
                    <!-- Service 1 -->
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <div class="service-content">
                            <h3>Garden & Landscape Maintenance</h3>
                            <p>Professional care to keep your outdoor spaces vibrant and healthy throughout the seasons.</p>
                            <ul>
                                <li>Regular Garden Maintenance</li>
                                <li>Soft Landscaping Installation</li>
                                <li>Re-vegetation Services</li>
                                <li>Contract Growing for Projects</li>
                            </ul>
                        </div>
                    </div>
                   
                    <!-- Service 2 -->
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-mountain"></i>
                        </div>
                        <div class="service-content">
                            <h3>Hard Landscaping & Structures</h3>
                            <p>Building durable, beautiful outdoor structures that complement your natural environment.</p>
                            <ul>
                                <li>Paving, Walls & Gabions</li>
                                <li>Stairs, Pergolas & Water Features</li>
                                <li>Ponds, Edging & Drainage</li>
                                <li>Vertical Garden Systems</li>
                            </ul>
                        </div>
                    </div>
                   
                    <!-- Service 3 -->
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-tint"></i>
                        </div>
                        <div class="service-content">
                            <h3>Irrigation & Water Management</h3>
                            <p>Smart water solutions for sustainable, efficient landscape maintenance.</p>
                            <ul>
                                <li>Custom Irrigation System Design</li>
                                <li>Grey Water System Installation</li>
                                <li>Hydroseeding Applications</li>
                                <li>Water Feature Design & Maintenance</li>
                            </ul>
                        </div>
                    </div>
                   
                    <!-- Service 4 -->
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-futbol"></i>
                        </div>
                        <div class="service-content">
                            <h3>Specialized Landscaping Services</h3>
                            <p>Expert solutions for unique outdoor requirements and environments.</p>
                            <ul>
                                <li>Sports Field Construction</li>
                                <li>Sports Field Maintenance</li>
                                <li>Environmental Contracting</li>
                                <li>Project-Specific Landscape Design</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Gallery Section -->
        <section class="gallery section-padding" id="gallery">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-title">Our Project Gallery</h2>
                    <p class="section-subtitle">Explore our portfolio of completed landscaping projects showcasing our expertise and craftsmanship.</p>
                </div>
               
                <div class="gallery-filter">
                    <button class="filter-btn active" data-filter="all">All Projects</button>
                    <button class="filter-btn" data-filter="hardscaping">Hard Landscaping</button>
                    <button class="filter-btn" data-filter="gardens">Gardens</button>
                    <button class="filter-btn" data-filter="irrigation">Irrigation</button> 
                </div>
               
                <div class="website-gallery-grid" id="websiteGalleryGrid">
                    <!-- Gallery items will be loaded dynamically from localStorage -->
                </div>
            </div>
        </section>
        <!-- About Section -->
        <section class="about section-padding" id="about">
            <div class="container">
                <div class="about-content">
                    <div class="about-text">
                        <h2 class="section-title">Crafting Exceptional Outdoor Spaces</h2>
                        <p>At New Horizon Landscaping Solutions, we blend artistry with technical expertise to create outdoor environments that inspire and endure. With nearly a decade of industry experience, we've mastered the balance between aesthetic beauty and functional design.</p>
                        <p>Our team of certified professionals approaches each project with meticulous attention to detail, ensuring every element—from the initial design to the final installation—meets our exacting standards.</p>
                        <p>We pride ourselves on sustainable practices, incorporating water-wise irrigation systems, native plant selections, and environmentally responsible materials into our designs. Our commitment extends beyond completion, with comprehensive maintenance services to preserve the beauty and integrity of your landscape.</p>
                        <p>Whether transforming residential gardens, enhancing commercial properties, or constructing professional sports facilities, we deliver solutions that exceed expectations and stand the test of time.</p>
                        <a href="#contact" class="btn" style="margin-top: 20px;">Discuss Your Project</a>
                    </div>
                    <div class="about-image">
                        <img src="https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Professional landscaping team at work">
                    </div>
                </div>
            </div>
        </section>
        <!-- Contact Section -->
        <section class="contact-section section-padding" id="contact">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-title">Get In Touch</h2>
                    <p class="section-subtitle">Contact us today to discuss your landscaping project. We'll respond within 24 hours.</p>
                </div>
               
                <div class="contact-container">
                    <!-- Contact Information -->
                    <div class="contact-info">
                        <h3>Contact Information</h3>
                       
                        <div class="contact-details">
                            <div class="contact-detail-item">
                                <div class="contact-detail-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div class="contact-detail-text">
                                    <h4>Our Location</h4>
                                    <p>92 Studley St, Southfield, Cape Town, 7801</p>
                                </div>
                            </div>
                           
                            <div class="contact-detail-item">
                                <div class="contact-detail-icon">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <div class="contact-detail-text">
                                    <h4>Phone Number</h4>
                                    <p>+27 79 267 2480</p>
                                </div>
                            </div>
                           
                            <div class="contact-detail-item">
                                <div class="contact-detail-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="contact-detail-text">
                                    <h4>Email Address</h4>
                                    <p>info@newhorizonlandscaping.co.za</p>
                                </div>
                            </div>
                        </div>
                       
                        <div class="business-hours">
                            <h4>Business Hours</h4>
                            <p><strong>Monday - Friday:</strong> 8:00 AM - 6:00 PM</p>
                            <p><strong>Saturday:</strong> 9:00 AM - 4:00 PM</p>
                            <p><strong>Sunday:</strong> Emergency Services Only</p>
                        </div>
                    </div>
                   
                    <!-- Contact Form - NOW LINKED TO sendmail.php -->
                    <div class="contact-form-container">
                        <h3>Send Us a Message</h3>
                        <form id="contactForm" action="sendmail.php" method="POST">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName">First Name *</label>
                                    <input type="text" id="firstName" name="firstName" class="form-control" required>
                                </div>
                               
                                <div class="form-group">
                                    <label for="lastName">Last Name *</label>
                                    <input type="text" id="lastName" name="lastName" class="form-control" required>
                                </div>
                            </div>
                           
                            <div class="form-group">
                                <label for="email">Email Address *</label>
                                <input type="email" id="email" name="email" class="form-control" required>
                            </div>
                           
                            <div class="form-group">
                                <label for="phone">Phone Number *</label>
                                <input type="tel" id="phone" name="phone" class="form-control" required>
                            </div>
                           
                            <div class="form-group">
                                <label for="service">Service Interested In</label>
                                <select id="service" name="service" class="form-control">
                                    <option value="">Select a service</option>
                                    <option value="maintenance">Garden Maintenance</option>
                                    <option value="hardscaping">Hard Landscaping</option>
                                    <option value="irrigation">Irrigation Systems</option>
                                    <option value="design">Landscape Design</option> 
                                    <option value="other">Other</option>
                                </select>
                            </div>
                           
                            <div class="form-group">
                                <label for="message">Message *</label>
                                <textarea id="message" name="message" class="form-control" placeholder="Tell us about your project..." required></textarea>
                            </div>
                           
                            <!-- Add a hidden field for spam protection (honeypot) -->
                            <input type="text" name="website" style="display:none;" tabindex="-1" autocomplete="off">
                           
                            <div class="form-loading" id="formLoading">
                                <i class="fas fa-spinner fa-spin"></i> Sending your message...
                            </div>
                           
                            <button type="submit" class="btn btn-green" style="width: 100%; padding: 15px;">
                                <i class="fas fa-paper-plane"></i> Send Message
                            </button>
                           
                            <div class="form-success" id="formSuccess">
                                <i class="fas fa-check-circle" style="font-size: 24px; margin-bottom: 10px;"></i>
                                <h4>Thank You!</h4>
                                <p>Your message has been sent successfully. We'll get back to you within 24 hours.</p>
                            </div>
                           
                            <div class="form-error" id="formError">
                                <i class="fas fa-exclamation-circle" style="font-size: 24px; margin-bottom: 10px;"></i>
                                <h4>Oops! Something went wrong</h4>
                                <p id="errorMessage">There was an error sending your message. Please try again or contact us directly.</p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer -->
        <footer>
            <div class="container">
                <!-- Footer Main Content -->
                <div class="footer-main">
                    <div class="footer-logo-section">
                        <div class="footer-logo">
                            <img src="./img/NHLS Logo.png" alt="New Horizon Landscaping Solutions" class="logo-img">
                        </div>
                        <p class="footer-tagline">Premium landscaping solutions for residential, commercial, and municipal projects. Transforming outdoor spaces since 2018 with sustainable, innovative approaches.</p>
                        <div class="footer-contact">
                            <p><i class="fas fa-map-marker-alt"></i>92 Studley St, Southfield, Cape Town, 7801</p>
                            <p><i class="fas fa-phone"></i> +27 79 267 2480</p>
                            <p><i class="fas fa-envelope"></i> info@newhorizonlandscaping.co.za</p>
                        </div>
                    </div>
                   
                    <div class="footer-links">
                        <div class="footer-links-column">
                            <h4>Quick Links</h4>
                            <ul>
                                <li><a href="#home">Home</a></li>
                                <li><a href="#services">Services</a></li>
                                <li><a href="#gallery">Gallery</a></li>
                                <li><a href="#about">About Us</a></li>
                                <li><a href="#contact">Contact</a></li>
                            </ul>
                        </div>
                       
                        <div class="footer-links-column">
                            <h4>Our Services</h4>
                            <ul>
                                <li><a href="#services">Landscape Design</a></li>
                                <li><a href="#services">Hard Landscaping</a></li>
                                <li><a href="#services">Garden Maintenance</a></li>
                                <li><a href="#services">Irrigation Systems</a></li> 
                            </ul>
                        </div>
                    </div>
                </div>
               
                <!-- Divider Line -->
                <div class="footer-divider"></div>
               
                <!-- Copyright Section -->
                <div class="footer-copyright">
                    <p>Copyright © 2026 <span class="company-name">New Horizon Landscaping Solutions</span>. All rights reserved.</p>
                    <p class="crafted-by">Crafted by <strong><a href="https://www.shailendralm.co.za/webdev.php/" class="brand-name">Shailendra Visuals</a></strong></p>
                </div>
            </div>
        </footer>
        <!-- Lightbox Modal -->
        <div class="lightbox-modal" id="lightboxModal">
            <span class="lightbox-close" id="lightboxClose">&times;</span>
            <div class="lightbox-content" id="lightboxContent">
                <img id="lightboxImage" src="" alt="">
            </div>
            <div class="lightbox-nav">
                <div class="lightbox-nav-btn" id="lightboxPrev"><i class="fas fa-chevron-left"></i></div>
                <div class="lightbox-nav-btn" id="lightboxNext"><i class="fas fa-chevron-right"></i></div>
            </div>
        </div>
    </div>
    <!-- Admin Portal -->
    <div id="admin-portal">
        <div class="admin-container">
            <div class="admin-header">
                <h1>Admin Portal</h1>
                <p>Upload and manage your gallery images directly from your phone or computer.</p>
                <a href="#" class="back-to-site switch-to-main"><i class="fas fa-arrow-left"></i> Back to Website</a>
            </div>
           
            <!-- Login form (initially shown) -->
            <div id="loginSection" class="login-container">
                <div class="login-form admin-card">
                    <h2>Admin Login</h2>
                    <div class="form-group">
                        <label for="adminPassword">Password</label>
                        <input type="password" id="adminPassword" class="form-control" placeholder="Enter admin password">
                        <p class="password-hint"> </p>
                    </div>
                    <button id="loginBtn" class="btn btn-full">Login</button>
                </div>
            </div>
           
            <!-- Admin dashboard (initially hidden) -->
            <div id="adminDashboard" style="display: none;">
                <div class="admin-content">
                    <div>
                        <div class="admin-card">
                            <h2>Upload New Image</h2>
                            <div id="messageContainer"></div>
                           
                            <!-- File Upload Area -->
                            <div class="file-upload-container" id="fileUploadContainer">
                                <div class="file-upload-icon">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                </div>
                                <div class="file-upload-text">
                                    <h4>Select or Drop Image</h4>
                                    <p>Choose an image from your device or drag and drop it here</p>
                                    <div class="file-upload-btn" id="browseBtn">
                                        <i class="fas fa-folder-open"></i> Browse Files
                                    </div>
                                    <input type="file" id="imageFile" class="file-input" accept="image/*">
                                </div>
                            </div>
                           
                            <!-- Selected File Info -->
                            <div class="selected-file" id="selectedFile">
                                <div class="file-icon">
                                    <i class="fas fa-image"></i>
                                </div>
                                <div class="file-info">
                                    <h5 id="fileName">No file selected</h5>
                                    <p id="fileSize">0 KB</p>
                                </div>
                            </div>
                           
                            <!-- Image Preview -->
                            <div class="image-preview" id="imagePreview">
                                <img id="previewImage" src="" alt="Image preview">
                            </div>
                           
                            <!-- Image Details Form -->
                            <div class="form-group">
                                <label for="imageTitle">Image Title *</label>
                                <input type="text" id="imageTitle" class="form-control" placeholder="Beautiful Garden Design" required>
                            </div>
                           
                            <div class="form-group">
                                <label for="imageDescription">Description</label>
                                <textarea id="imageDescription" class="form-control" placeholder="Describe the project or image"></textarea>
                            </div>
                           
                            <div class="form-group">
                                <label for="imageCategory">Category *</label>
                                <select id="imageCategory" class="form-control" required>
                                    <option value="">Select a category</option>
                                    <option value="hardscaping">Hard Landscaping</option>
                                    <option value="gardens">Gardens</option>
                                    <option value="irrigation">Irrigation</option> 
                                    <option value="maintenance">Maintenance</option>
                                    <option value="vertical">Vertical Gardens</option>
                                    <option value="water">Water Features</option>
                                </select>
                            </div>
                           
                            <button id="uploadBtn" class="btn btn-green btn-full" disabled>
                                <i class="fas fa-upload"></i> Upload Image
                            </button>
                           
                            <div class="storage-info">
                                <p><strong>Note:</strong> Images are uploaded to server and saved to the img/ folder on your server.</p>
                            </div>
                        </div>
                       
                        <div class="admin-card">
                            <h2>Admin Tools</h2>
                            <button id="exportGalleryBtn" class="btn btn-full" style="margin-bottom: 15px;">
                                <i class="fas fa-download"></i> Export Gallery Data
                            </button>
                            <button id="importGalleryBtn" class="btn btn-full" style="margin-bottom: 15px;">
                                <i class="fas fa-upload"></i> Import Gallery Data
                            </button>
                            <input type="file" id="importFile" class="file-input" accept=".json" style="display: none;">
                            <button id="resetGalleryBtn" class="btn btn-red btn-full" style="margin-bottom: 15px;">
                                <i class="fas fa-redo"></i> Reset to Default Gallery
                            </button>
                            <button id="logoutBtn" class="btn btn-full">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                    </div>
                   
                    <div>
                        <div class="gallery-management admin-card">
                            <h2>Manage Gallery Images</h2>
                            <p>Click the delete button to remove an image from the gallery.</p>
                            <div id="galleryCount" class="message info">
                                Loading gallery images...
                            </div>
                           
                            <div id="galleryList" class="gallery-list">
                                <!-- Gallery items will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
   <script>
    // ========== CONFIGURATION ==========
    const ADMIN_PASSWORD = "NewHorizon2026!";
    const SERVER_URL = window.location.origin;

    // ========== GLOBAL DATA ==========
    let userProjects = [];
    let statistics = {};
    let testimonialsData = [];

    // Default testimonials (will be loaded from server)
    const defaultTestimonials = [
        {
            name: "Mike T.",
            rating: "★★★★★",
            text: "The New Horizon team transformed my backyard into a beautiful oasis. Their attention to detail and professionalism was outstanding!",
            avatar: "https://randomuser.me/api/portraits/men/32.jpg"
        },
        {
            name: "Amanda K.",
            rating: "★★★★☆",
            text: "Excellent landscaping service. The team was punctual, careful with my property, and delivered beyond expectations.",
            avatar: "https://randomuser.me/api/portraits/women/44.jpg"
        },
        {
            name: "James T.",
            rating: "★★★★★",
            text: "Professional garden design that completely transformed my overgrown yard. Very happy with their work!",
            avatar: "https://randomuser.me/api/portraits/men/67.jpg"
        }
    ];

    // ========== LIGHTBOX GALLERY ==========
    let currentLightboxIndex = 0;
    let allGalleryImages = [];

    function openLightbox(index) {
        currentLightboxIndex = index;
        const lightboxOverlay = document.getElementById('lightboxOverlay');
        const lightboxImage = document.getElementById('lightboxImage');
        const lightboxCounter = document.getElementById('lightboxCounter');
    
        if (lightboxOverlay && lightboxImage && lightboxCounter) {
            lightboxImage.src = allGalleryImages[index].image;
            lightboxCounter.textContent = `${index + 1} / ${allGalleryImages.length}`;
            lightboxOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
    }

    function closeLightbox() {
        const lightboxOverlay = document.getElementById('lightboxOverlay');
        if (lightboxOverlay) {
            lightboxOverlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    }

    function navigateLightbox(direction) {
        currentLightboxIndex += direction;
    
        if (currentLightboxIndex < 0) {
            currentLightboxIndex = allGalleryImages.length - 1;
        } else if (currentLightboxIndex >= allGalleryImages.length) {
            currentLightboxIndex = 0;
        }
    
        const lightboxImage = document.getElementById('lightboxImage');
        const lightboxCounter = document.getElementById('lightboxCounter');
    
        if (lightboxImage && lightboxCounter) {
            lightboxImage.src = allGalleryImages[currentLightboxIndex].image;
            lightboxCounter.textContent = `${currentLightboxIndex + 1} / ${allGalleryImages.length}`;
        }
    }

    function initializeLightbox() {
        const lightboxClose = document.getElementById('lightboxClose');
        const lightboxPrev = document.getElementById('lightboxPrev');
        const lightboxNext = document.getElementById('lightboxNext');
        const lightboxOverlay = document.getElementById('lightboxOverlay');
    
        if (lightboxClose) {
            lightboxClose.addEventListener('click', closeLightbox);
        }
    
        if (lightboxPrev) {
            lightboxPrev.addEventListener('click', () => navigateLightbox(-1));
        }
    
        if (lightboxNext) {
            lightboxNext.addEventListener('click', () => navigateLightbox(1));
        }
    
        if (lightboxOverlay) {
            lightboxOverlay.addEventListener('click', (e) => {
                if (e.target === lightboxOverlay) {
                    closeLightbox();
                }
            });
        }
    
        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            const lightboxOverlay = document.getElementById('lightboxOverlay');
            if (!lightboxOverlay || !lightboxOverlay.classList.contains('active')) return;
        
            switch(e.key) {
                case 'Escape':
                    closeLightbox();
                    break;
                case 'ArrowLeft':
                    navigateLightbox(-1);
                    break;
                case 'ArrowRight':
                    navigateLightbox(1);
                    break;
            }
        });
    }

    // ========== COUNTER FUNCTIONS ==========
    function updateCounters() {
        const projectsCounter = document.getElementById('projects-counter');
        const clientsCounter = document.getElementById('clients-counter');
        const experienceCounter = document.getElementById('experience-counter');
    
        if (projectsCounter) {
            projectsCounter.textContent = statistics.projects;
            projectsCounter.classList.add('counting');
            setTimeout(() => projectsCounter.classList.remove('counting'), 1000);
        }
    
        if (clientsCounter) {
            clientsCounter.textContent = statistics.clients;
            clientsCounter.classList.add('counting');
            setTimeout(() => clientsCounter.classList.remove('counting'), 1000);
        }
    
        if (experienceCounter) {
            experienceCounter.textContent = statistics.experience;
            experienceCounter.classList.add('counting');
            setTimeout(() => experienceCounter.classList.remove('counting'), 1000);
        }
    }

    function animateCounter(element, target, duration = 2000) {
        if (!element) return;
    
        let start = 0;
        const increment = target / (duration / 50);
    
        element.textContent = '0';
        element.classList.add('counting');
    
        const updateCounter = () => {
            start += increment;
            if (start < target) {
                element.textContent = Math.floor(start);
                setTimeout(updateCounter, 50);
            } else {
                element.textContent = target;
                setTimeout(() => element.classList.remove('counting'), 1000);
            }
        };
    
        updateCounter();
    }

    // ========== SERVER FUNCTIONS ==========
    async function loadAllDataFromServer() {
        try {
            // Load projects from server
            const projectsResponse = await fetch('get_gallery.php');
            if (projectsResponse.ok) {
                const projectsData = await projectsResponse.json();
            
                if (projectsData.success) {
                    userProjects = projectsData.userProjects || [];
                    console.log('Loaded projects from server:', userProjects.length);
                } else {
                    console.error('Server returned error:', projectsData.message);
                    loadFromLocalStorage();
                }
            } else {
                console.error('Failed to load projects from server');
                loadFromLocalStorage();
            }
        
            // Load statistics from server
            const statsResponse = await fetch('get_statistics.php');
            if (statsResponse.ok) {
                const statsData = await statsResponse.json();
                if (statsData.success) {
                    statistics = statsData.statistics || { projects: 0, clients: 0, experience: 0 };
                } else {
                    statistics = { projects: 0, clients: 0, experience: 0 };
                }
            } else {
                statistics = { projects: 0, clients: 0, experience: 0 };
            }
        
            return true;
        
        } catch (error) {
            console.error('Error loading from server:', error);
            loadFromLocalStorage();
            return false;
        }
    }

    function loadFromLocalStorage() {
        // Load user projects
        const savedProjects = localStorage.getItem('newHorizonProjects');
        if (savedProjects) {
            try {
                userProjects = JSON.parse(savedProjects);
            } catch (error) {
                console.error('Error parsing projects:', error);
                userProjects = [];
            }
        }
    
        // Load statistics
        const savedStats = localStorage.getItem('newHorizonStatistics');
        if (savedStats) {
            try {
                statistics = JSON.parse(savedStats);
            } catch (error) {
                console.error('Error parsing statistics:', error);
                statistics = { projects: 0, clients: 0, experience: 0 };
            }
        } else {
            statistics = { projects: 0, clients: 0, experience: 0 };
        }
    }

    function saveToLocalStorage() {
        localStorage.setItem('newHorizonProjects', JSON.stringify(userProjects));
        localStorage.setItem('newHorizonStatistics', JSON.stringify(statistics));
    }

    // ========== PROJECT MANAGEMENT ==========
    async function addProject(title, description, category, imageFile) {
        try {
            const formData = new FormData();
            formData.append('image', imageFile);
            formData.append('title', title);
            formData.append('description', description);
            formData.append('category', category);
        
            const response = await fetch('upload_image.php', {
                method: 'POST',
                body: formData
            });
        
            if (!response.ok) {
                throw new Error(`Server responded with ${response.status}`);
            }
        
            const result = await response.json();
        
            if (result.success) {
                resetAdminForm();
                await loadAllDataFromServer();
                refreshPortfolio();
                
                if (document.body.classList.contains('admin-mode')) {
                    renderAdminGalleryList();
                }
                
                return {
                    success: true,
                    message: 'Project added successfully!',
                    project: result.project
                };
            } else {
                throw new Error(result.message || 'Upload failed');
            }
        
        } catch (error) {
            console.error('Upload error:', error);
            return {
                success: false,
                message: 'Failed to add project: ' + error.message
            };
        }
    }

    async function deleteProject(projectId, filename) {
        if (!confirm('Are you sure you want to delete this project? The image file will be permanently removed.')) {
            return;
        }
    
        try {
            const response = await fetch('delete_image.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    id: projectId,
                    filename: filename
                })
            });
        
            if (!response.ok) {
                throw new Error(`Server responded with ${response.status}`);
            }
        
            const result = await response.json();
        
            if (result.success) {
                await loadAllDataFromServer();
                refreshPortfolio();
                
                if (document.body.classList.contains('admin-mode')) {
                    renderAdminGalleryList();
                }
                
                showMessage('Project deleted successfully!', 'success');
            } else {
                throw new Error(result.message || 'Delete failed');
            }
        
        } catch (error) {
            console.error('Error deleting project:', error);
            showMessage('Error deleting project: ' + error.message, 'error');
        }
    }

    // ========== WEBSITE FUNCTIONALITY ==========
    function initializePortfolio() {
        const portfolioContainer = document.getElementById('portfolio-container');
        if (!portfolioContainer) return;
    
        portfolioContainer.innerHTML = '';
    
        allGalleryImages = [...userProjects];
    
        allGalleryImages.forEach((project, index) => {
            const portfolioItem = document.createElement('div');
            portfolioItem.className = 'portfolio-item';
            portfolioItem.style.backgroundImage = `url('${project.image}')`;
            portfolioItem.style.cursor = 'pointer';
            portfolioItem.dataset.index = index;
            
            portfolioItem.addEventListener('click', () => {
                openLightbox(index);
            });
            
            portfolioContainer.appendChild(portfolioItem);
        });
        
        updateLightboxImages();
    }

    function refreshPortfolio() {
        initializePortfolio();
        updateLightboxImages();
    }

    function updateLightboxImages() {
        allGalleryImages = [...userProjects];
    }

    // Testimonial Slider
    let currentTestimonial = 0;

    function initializeTestimonialSlider() {
        const track = document.getElementById('testimonial-track');
        const dotsContainer = document.getElementById('testimonial-dots');
    
        if (!track || !dotsContainer) return;
    
        // Use server testimonials or default
        const testimonials = testimonialsData.length > 0 ? testimonialsData : defaultTestimonials;
    
        testimonials.forEach((testimonial, index) => {
            const slide = document.createElement('div');
            slide.className = 'testimonial-slide';
        
            slide.innerHTML = `
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="testimonial-avatar" style="background-image: url('${testimonial.avatar}');"></div>
                        <div class="testimonial-info">
                            <h4>${testimonial.name}</h4>
                            <div class="testimonial-rating">${testimonial.rating}</div>
                        </div>
                    </div>
                    <p class="testimonial-text">${testimonial.text}</p>
                </div>
            `;
        
            track.appendChild(slide);
        
            const dot = document.createElement('div');
            dot.className = 'testimonial-dot';
            if (index === 0) dot.classList.add('active');
            dot.addEventListener('click', () => goToTestimonial(index));
            dotsContainer.appendChild(dot);
        });
    
        const prevBtn = document.getElementById('prev-testimonial');
        const nextBtn = document.getElementById('next-testimonial');
    
        if (prevBtn) {
            prevBtn.addEventListener('click', () => {
                goToTestimonial(currentTestimonial - 1);
            });
        }
    
        if (nextBtn) {
            nextBtn.addEventListener('click', () => {
                goToTestimonial(currentTestimonial + 1);
            });
        }
    
        setInterval(() => {
            goToTestimonial(currentTestimonial + 1);
        }, 5000);
    }

    function goToTestimonial(index) {
        const track = document.getElementById('testimonial-track');
        const dots = document.querySelectorAll('.testimonial-dot');
        const testimonials = testimonialsData.length > 0 ? testimonialsData : defaultTestimonials;
        const totalTestimonials = testimonials.length;
    
        if (!track || dots.length === 0) return;
    
        if (index >= totalTestimonials) {
            index = 0;
        } else if (index < 0) {
            index = totalTestimonials - 1;
        }
    
        currentTestimonial = index;
        track.style.transform = `translateX(-${currentTestimonial * 100}%)`;
    
        dots.forEach((dot, i) => {
            if (i === currentTestimonial) {
                dot.classList.add('active');
            } else {
                dot.classList.remove('active');
            }
        });
    }

    // ========== ADMIN PORTAL FUNCTIONALITY ==========
    const floatingAdminBtn = document.getElementById('floatingAdminBtn');

    if (floatingAdminBtn) {
        floatingAdminBtn.addEventListener('click', function() {
            if (document.body.classList.contains('admin-mode')) {
                switchToMainMode();
            } else {
                switchToAdminMode();
            }
        });
    }

    // Mode switching functions
    function switchToMainMode() {
        modeToggleBtns.forEach(b => b.classList.remove('active'));
        document.querySelector('.mode-toggle-btn[data-mode="main"]').classList.add('active');
        document.body.className = 'main-mode';
        if (floatingAdminBtn) floatingAdminBtn.classList.remove('admin-active');
    }

    function switchToAdminMode() {
        modeToggleBtns.forEach(b => b.classList.remove('active'));
        document.querySelector('.mode-toggle-btn[data-mode="admin"]').classList.add('active');
        document.body.className = 'admin-mode';
        if (floatingAdminBtn) floatingAdminBtn.classList.add('admin-active');
        checkLoginStatus();
    }

    const modeToggleBtns = document.querySelectorAll('.mode-toggle-btn');
    const switchToMainBtn = document.querySelector('.switch-to-main');

    modeToggleBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const mode = this.dataset.mode;
            modeToggleBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            document.body.className = `${mode}-mode`;
            
            if (floatingAdminBtn) {
                if (mode === 'admin') {
                    floatingAdminBtn.classList.add('admin-active');
                    checkLoginStatus();
                    
                    setTimeout(async () => {
                        await loadAllDataFromServer();
                        renderAdminGalleryList();
                    }, 100);
                } else {
                    floatingAdminBtn.classList.remove('admin-active');
                }
            }
        });
    });

    if (switchToMainBtn) {
        switchToMainBtn.addEventListener('click', function(e) {
            e.preventDefault();
            switchToMainMode();
        });
    }

    // Check login status
    function checkLoginStatus() {
        const isLoggedIn = localStorage.getItem('newHorizonAdminLoggedIn') === 'true';
        if (isLoggedIn) {
            showAdminDashboard();
        } else {
            showLoginForm();
        }
    }

    // Show login form function
    function showLoginForm() {
        const loginSection = document.getElementById('loginSection');
        const adminDashboard = document.getElementById('adminDashboard');
    
        if (loginSection) {
            loginSection.style.display = 'block';
            const adminPasswordInput = document.getElementById('adminPassword');
            if (adminPasswordInput) adminPasswordInput.value = '';
        }
        if (adminDashboard) adminDashboard.style.display = 'none';
    }

    // Show admin dashboard
    function showAdminDashboard() {
        const loginSection = document.getElementById('loginSection');
        const adminDashboard = document.getElementById('adminDashboard');
    
        if (loginSection) loginSection.style.display = 'none';
        if (adminDashboard) {
            adminDashboard.style.display = 'block';
            renderAdminGalleryList();
            loadStatisticsForm();
        }
    }

    // Message function
    function showMessage(text, type, containerId = 'messageContainer') {
        const messageContainer = document.getElementById(containerId);
        if (messageContainer) {
            messageContainer.innerHTML = `<div class="message ${type}">${text}</div>`;
        
            setTimeout(() => {
                messageContainer.innerHTML = '';
            }, 5000);
        }
    }

    function formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    // Login function with ENTER key support
    function initializeLogin() {
        const loginBtn = document.getElementById('loginBtn');
        const adminPasswordInput = document.getElementById('adminPassword');
        
        const performLogin = () => {
            if (!adminPasswordInput) return;
            
            const password = adminPasswordInput.value.trim();
            
            if (password === ADMIN_PASSWORD) {
                localStorage.setItem('newHorizonAdminLoggedIn', 'true');
                showAdminDashboard();
                showMessage('Login successful!', 'success');
            } else {
                showMessage('Incorrect password. Please try again.', 'error');
                adminPasswordInput.value = '';
                adminPasswordInput.focus();
            }
        };
        
        if (loginBtn) {
            loginBtn.addEventListener('click', performLogin);
        }
        
        if (adminPasswordInput) {
            adminPasswordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performLogin();
                }
            });
        }
    }

    // Logout function
    function initializeLogout() {
        const logoutAdminBtn = document.getElementById('logoutAdminBtn');
        if (logoutAdminBtn) {
            logoutAdminBtn.addEventListener('click', () => {
                localStorage.removeItem('newHorizonAdminLoggedIn');
                showLoginForm();
                showMessage('Logged out successfully!', 'success');
            });
        }
    }

    // Render admin gallery list
    function renderAdminGalleryList() {
        const adminGalleryList = document.getElementById('galleryList');
        if (!adminGalleryList) return;
    
        adminGalleryList.innerHTML = '';
    
        const totalProjects = userProjects.length;
    
        const galleryCount = document.getElementById('galleryCount');
        if (galleryCount) {
            galleryCount.textContent = `Total: ${totalProjects} projects`;
            galleryCount.className = 'message info';
        }
    
        if (totalProjects === 0) {
            adminGalleryList.innerHTML = '<div class="message info">No projects to display. Add your first project!</div>';
            return;
        }
    
        // Display user projects
        userProjects.forEach((project, index) => {
            const galleryItem = document.createElement('div');
            galleryItem.className = 'gallery-item';
            galleryItem.innerHTML = `
                <img src="${project.image}" alt="${project.title}" onerror="this.src='https://via.placeholder.com/300x200?text=Image+Not+Found'">
                <div class="gallery-item-info">
                    <h4>${project.title}</h4>
                    <p>${project.description || 'No description'}</p>
                    <div class="category-badge">${project.category || 'Uncategorized'}</div>
                    <div class="gallery-item-actions" style="margin-top: 10px;">
                        <button class="btn delete-btn" data-id="${project.id}" data-filename="${project.filename || ''}" style="background-color: #f44336;">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
            `;
            adminGalleryList.appendChild(galleryItem);
        });
    
        // Add event listeners to delete buttons
        document.querySelectorAll('.delete-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const id = this.dataset.id;
                const filename = this.dataset.filename;
                deleteProject(id, filename);
            });
        });
    }

    // Load statistics form
    function loadStatisticsForm() {
        const statsProjects = document.getElementById('statsProjects');
        const statsClients = document.getElementById('statsClients');
        const statsExperience = document.getElementById('statsExperience');
    
        if (statsProjects) statsProjects.value = statistics.projects;
        if (statsClients) statsClients.value = statistics.clients;
        if (statsExperience) statsExperience.value = statistics.experience;
    }

    // Update statistics
    const updateStatsBtn = document.getElementById('updateStatsBtn');
    if (updateStatsBtn) {
        updateStatsBtn.addEventListener('click', async () => {
            const statsProjects = document.getElementById('statsProjects');
            const statsClients = document.getElementById('statsClients');
            const statsExperience = document.getElementById('statsExperience');
        
            if (!statsProjects || !statsClients || !statsExperience) return;
        
            const newStats = {
                projects: parseInt(statsProjects.value) || 0,
                clients: parseInt(statsClients.value) || 0,
                experience: parseInt(statsExperience.value) || 0
            };
        
            try {
                const response = await fetch('update_statistics.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(newStats)
                });
            
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        statistics = newStats;
                        updateCounters();
                        saveToLocalStorage();
                        showMessage('Statistics updated successfully!', 'success');
                    } else {
                        showMessage('Failed to update statistics', 'error');
                    }
                } else {
                    showMessage('Failed to connect to server', 'error');
                }
            } catch (error) {
                showMessage('Error updating statistics: ' + error.message, 'error');
            }
        });
    }

    // File upload handling
    let selectedImageFile = null;

    const browseBtn = document.getElementById('browseBtn');
    const imageFileInput = document.getElementById('imageFile');

    if (browseBtn && imageFileInput) {
        browseBtn.addEventListener('click', () => {
            imageFileInput.click();
        });
    
        imageFileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFileSelect(e.target.files[0]);
            }
        });
    }

    const fileUploadContainer = document.getElementById('fileUploadContainer');
    if (fileUploadContainer) {
        fileUploadContainer.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileUploadContainer.classList.add('drag-over');
        });
    
        fileUploadContainer.addEventListener('dragleave', () => {
            fileUploadContainer.classList.remove('drag-over');
        });
    
        fileUploadContainer.addEventListener('drop', (e) => {
            e.preventDefault();
            fileUploadContainer.classList.remove('drag-over');
        
            if (e.dataTransfer.files.length > 0) {
                handleFileSelect(e.dataTransfer.files[0]);
            }
        });
    }

    function handleFileSelect(file) {
        if (!file.type.match('image.*')) {
            showMessage('Please select an image file (JPEG, PNG, etc.)', 'error', 'projectMessageContainer');
            return;
        }
    
        const maxSize = 5 * 1024 * 1024;
        if (file.size > maxSize) {
            showMessage('Image size should be less than 5MB', 'error', 'projectMessageContainer');
            return;
        }
    
        selectedImageFile = file;
    
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const selectedFile = document.getElementById('selectedFile');
    
        if (fileName) fileName.textContent = file.name;
        if (fileSize) fileSize.textContent = formatFileSize(file.size);
        if (selectedFile) selectedFile.classList.add('active');
    
        const reader = new FileReader();
        reader.onload = function(e) {
            const previewImage = document.getElementById('previewImage');
            const imagePreview = document.getElementById('imagePreview');
            if (previewImage) previewImage.src = e.target.result;
            if (imagePreview) imagePreview.classList.add('active');
        };
        reader.readAsDataURL(file);
    
        checkFormValidity();
        showMessage('Image selected successfully!', 'success', 'projectMessageContainer');
    }

    function checkFormValidity() {
        const projectTitle = document.getElementById('projectTitle');
        const projectCategory = document.getElementById('projectCategory');
        const uploadProjectBtn = document.getElementById('uploadProjectBtn');
    
        const isTitleValid = projectTitle && projectTitle.value.trim().length > 0;
        const isCategoryValid = projectCategory && projectCategory.value.trim().length > 0;
        const hasImage = selectedImageFile !== null;
    
        if (uploadProjectBtn) {
            uploadProjectBtn.disabled = !(isTitleValid && isCategoryValid && hasImage);
        }
    }

    const projectTitleInput = document.getElementById('projectTitle');
    const projectCategoryInput = document.getElementById('projectCategory');
    const projectDescriptionInput = document.getElementById('projectDescription');

    if (projectTitleInput) {
        projectTitleInput.addEventListener('input', checkFormValidity);
    }

    if (projectCategoryInput) {
        projectCategoryInput.addEventListener('change', checkFormValidity);
    }

    if (projectDescriptionInput) {
        projectDescriptionInput.addEventListener('input', checkFormValidity);
    }

    const uploadProjectBtn = document.getElementById('uploadProjectBtn');
    if (uploadProjectBtn) {
        uploadProjectBtn.addEventListener('click', async () => {
            if (!selectedImageFile) {
                showMessage('Please select an image first', 'error', 'projectMessageContainer');
                return;
            }
        
            const title = projectTitleInput ? projectTitleInput.value.trim() : '';
            const description = projectDescriptionInput ? projectDescriptionInput.value.trim() : '';
            const category = projectCategoryInput ? projectCategoryInput.value : '';
        
            if (!title) {
                showMessage('Please enter a project title', 'error', 'projectMessageContainer');
                return;
            }

            if (!category) {
                showMessage('Please select a category', 'error', 'projectMessageContainer');
                return;
            }
        
            const originalText = uploadProjectBtn.innerHTML;
            uploadProjectBtn.innerHTML = '<span class="spinner"></span> Uploading...';
            uploadProjectBtn.disabled = true;
        
            try {
                const result = await addProject(title, description, category, selectedImageFile);
            
                if (result.success) {
                    showMessage(result.message, 'success', 'projectMessageContainer');
                } else {
                    showMessage(result.message || 'Failed to add project', 'error', 'projectMessageContainer');
                }
            } catch (error) {
                console.error('Upload error:', error);
                showMessage('Error uploading project: ' + error.message, 'error', 'projectMessageContainer');
            }
        
            uploadProjectBtn.innerHTML = originalText;
            uploadProjectBtn.disabled = false;
        });
    }

    function resetAdminForm() {
        if (projectTitleInput) projectTitleInput.value = '';
        if (projectDescriptionInput) projectDescriptionInput.value = '';
        if (projectCategoryInput) projectCategoryInput.value = '';
        selectedImageFile = null;
        const selectedFile = document.getElementById('selectedFile');
        if (selectedFile) selectedFile.classList.remove('active');
        const imagePreview = document.getElementById('imagePreview');
        if (imagePreview) imagePreview.classList.remove('active');
        const previewImage = document.getElementById('previewImage');
        if (previewImage) previewImage.src = '';
        if (imageFileInput) imageFileInput.value = '';
    }

    // ========== CONTACT FORM ==========
    const quoteForm = document.getElementById('quote-form');
    if (quoteForm) {
        quoteForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span class="spinner"></span> Sending...';
            submitBtn.disabled = true;
            
            try {
                const formData = new FormData(this);
                const data = Object.fromEntries(formData);
                
                const response = await fetch('sendmail.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showMessage('Thank you! Your quote request has been sent successfully. We will contact you soon.', 'success');
                    this.reset();
                } else {
                    showMessage('Sorry, there was an error sending your request. Please try again or call us directly.', 'error');
                }
            } catch (error) {
                console.error('Contact form error:', error);
                showMessage('Network error. Please try again or call us directly.', 'error');
            }
            
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        });
    }

    // ========== MOBILE NAVIGATION ==========
    const mobileMenu = document.querySelector('.mobile-menu');
    const nav = document.querySelector('nav');
    
    if (mobileMenu && nav) {
        mobileMenu.addEventListener('click', () => {
            nav.classList.toggle('active');
        });
        
        const navLinks = nav.querySelectorAll('a');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                nav.classList.remove('active');
            });
        });
    }

    // ========== ADD REFRESH BUTTON ==========
    function addRefreshButton() {
        // Check if button already exists
        if (document.getElementById('refreshGalleryBtn')) return;
        
        const refreshBtn = document.createElement('button');
        refreshBtn.id = 'refreshGalleryBtn';
        refreshBtn.className = 'btn';
        refreshBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh Gallery';
        refreshBtn.style.marginBottom = '15px';
        refreshBtn.style.width = '100%';
        
        const adminToolsCard = document.querySelector('.admin-card:nth-child(3)');
        if (adminToolsCard) {
            adminToolsCard.insertBefore(refreshBtn, adminToolsCard.firstChild);
        }
        
        refreshBtn.addEventListener('click', async () => {
            refreshBtn.innerHTML = '<span class="spinner"></span> Refreshing...';
            refreshBtn.disabled = true;
            
            try {
                await loadAllDataFromServer();
                refreshPortfolio();
                renderAdminGalleryList();
                showMessage('Gallery refreshed successfully!', 'success');
            } catch (error) {
                showMessage('Error refreshing gallery: ' + error.message, 'error');
            } finally {
                refreshBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh Gallery';
                refreshBtn.disabled = false;
            }
        });
    }

    // ========== INITIALIZATION ==========
    document.addEventListener('DOMContentLoaded', async function() {
        // Initialize core functionality
        await loadAllDataFromServer();
        initializePortfolio();
        initializeTestimonialSlider();
        initializeLightbox();
        updateCounters();
        
        // Initialize admin functions
        initializeLogin();
        initializeLogout();
        addRefreshButton();
    
        // Set up intersection observer for counters animation
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const projectsCounter = document.getElementById('projects-counter');
                    const clientsCounter = document.getElementById('clients-counter');
                    const experienceCounter = document.getElementById('experience-counter');
                
                    if (projectsCounter) {
                        projectsCounter.textContent = '0';
                        animateCounter(projectsCounter, statistics.projects, 2000);
                    }
                
                    if (clientsCounter) {
                        clientsCounter.textContent = '0';
                        animateCounter(clientsCounter, statistics.clients, 2000);
                    }
                
                    if (experienceCounter) {
                        experienceCounter.textContent = '0';
                        animateCounter(experienceCounter, statistics.experience, 2000);
                    }
                
                    observer.unobserve(entry.target);
                }
            });
        });
    
        const achievementsSection = document.querySelector('.achievements');
        if (achievementsSection) {
            observer.observe(achievementsSection);
        }
    
        // Check login status if we're already in admin mode
        if (document.body.classList.contains('admin-mode')) {
            checkLoginStatus();
        }
    
        // Force cache refresh for portfolio images
        window.addEventListener('load', function() {
            const portfolioItems = document.querySelectorAll('.portfolio-item');
            portfolioItems.forEach(item => {
                const bgImage = item.style.backgroundImage;
                if (bgImage) {
                    const url = bgImage.replace(/url\(['"]?(.*?)['"]?\)/, '$1');
                    const newUrl = `${url}?t=${new Date().getTime()}`;
                    item.style.backgroundImage = `url('${newUrl}')`;
                }
            });
        });
    
        console.log('New Horizon Landscaping Solutions Website Initialized');
        console.log('Statistics:', statistics);
        console.log('Projects:', userProjects.length);
    });
</script>
</body>
</html>


